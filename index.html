<!DOCTYPE html>
<html lang="fr">

<head>
	<title>Mariage Sylvain Tran & Jennifer Viger, Faire-part</title>

	<meta charset="UTF-8" />
	<meta name="description" content="Wedding faire-part" />
	<meta name="keywords" content="Wedding, HTML, CSS, JavaScript" />
	<meta name="author" content="Sylvain Tran" />
	<!-- FIXME: This causes some image resizing issues currently. -->
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Beau+Rivage&family=Island+Moments&family=Passions+Conflict&display=swap"
		rel="stylesheet">

	<link rel="icon" type="image/png" href="./assets/favicon.png" />
	<link type="text/css" rel="stylesheet" media="screen" href="./css/jquery-sakura.min.css" />
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			height: 100vh;
			width: 100vw;
			max-height: 100%;
			max-width: 100%;

			background-color: rgba(47, 3, 3, 0.918);
			font-family: "Island Moments", "cursive";
			font-weight: 10;
			font-style: normal;

			display: flex;
			flex-direction: column;
			gap: 1em;
			justify-content: center;
			align-items: center;
			justify-items: center;
			/* Center text within the container */
			text-align: center;
		}

		.wrapper {
			height: 200px;
			width: 800px;
			background-color: #7f0f0f;
			position: relative;
			display: flex;
			z-index: 0;
		}

		.lid {
			position: absolute;
			height: 100%;
			width: 100%;
			top: 0;
			left: 0;
			border-right: 150px solid transparent;
			border-bottom: 100px solid transparent;
			border-left: 150px solid transparent;
			transform-origin: top;
			transition: transform 0.25s linear;
		}

		/* Lid when closed */
		.lid.one {
			border-top: 250px solid rgb(110, 0, 0);
			transform: rotateX(0deg);
			z-index: 3;
			transition-delay: 0.75s;
			box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.2),
				/* Inner shadow for depth */
				50px 50px 150px rgba(0, 0, 0, 0.4);
		}

		/* Lid when opened */
		.lid.two {
			border-top: 150px solid rgb(110, 0, 0);
			transform: rotateX(90deg);
			z-index: 1;
			transition-delay: 0.5s;
		}

		.outer-seal {
			position: absolute;
			height: 125px;
			width: 125px;
			top: 185px;
			left: 42%;

			background-color: #380404;
			/* Deep red color for wax */
			border-radius: 50%;
			/* Makes it a perfect circle */

			box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.2),
				/* Inner shadow for depth */
				5px 5px 15px rgba(0, 0, 0, 0.3);
			/* Outer shadow for realistic wax */
			z-index: 4;
			cursor: pointer;
		}

		.seal {
			position: relative;
			height: 105px;
			width: 105px;
			top: 10px;
			left: 10px;

			background-color: #430404;
			/* Deep red color for wax */
			border-radius: 50%;
			/* Makes it a perfect circle */

			box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.2),
				/* Inner shadow for depth */
				5px 5px 15px rgba(0, 0, 0, 0.3);
			/* Outer shadow for realistic wax */
			z-index: 4;
			cursor: pointer;
		}

		.sealInner {
			position: relative;
			height: 80px;
			width: 80px;
			top: 14.5px;
			left: 12.5px;

			background-color: #460404;
			/* Deep red color for wax */
			border-radius: 50%;
			/* Makes it a perfect circle */
			position: relative;
			box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.2),
				/* Inner shadow for depth */
				5px 5px 15px rgba(0, 0, 0, 0.3);
			/* Outer shadow for realistic wax */
			z-index: 3;
			cursor: pointer;
		}

		.sealInner:hover {
			background-color: #7c0909;
		}

		.sealInner::before {
			content: "J+S";
			/* Example wax seal symbol */
			font-size: 50px;
			font-weight: bolder;
			color: rgba(0, 0, 0, 0.3);
			/* Subtle embossed effect */
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
		}

		.envelope {
			display: flex;
			flex-direction: column;
			gap: 1em;
			justify-content: center;
			align-items: center;
			justify-items: center;
			/* Center text within the container */
			text-align: center;

			height: 100%;
			width: 100%;
			border-top: 200px solid transparent;
			border-right: 350px solid rgb(88, 4, 4);
			border-bottom: 252px solid rgb(88, 4, 4);
			border-left: 350px solid rgb(88, 4, 4);
			z-index: 3;
		}

		.letter {
			position: absolute;
			top: 0;
			left: 75px;

			width: 80%;
			height: 300px;
			background-color: rgb(255, 255, 255);
			border-radius: 15px;
			z-index: 2;
			transition: 0.5s;
		}

		#fire-anim {
			position: relative;
			bottom: -75px;
			left: -30%;
			width: 800px;
			height: 200px;
			z-index: 5;
		}

		#replacement-letter {
			display: flex;
			flex-direction: column;
			gap: 1em;
			justify-content: center;
			align-items: center;
			justify-items: center;
			/* Center text within the container */
			text-align: center;

			position: absolute;
			height: 1280px;
			width: 60vw;
			max-height: 100%;
			max-width: 100%;
			/* Prevents text from spilling out */
			overflow: scroll;

			background-color: rgb(255, 255, 255);
			border-radius: 15px;
			transition: 0.5s;
			background-image: url("assets/letter-bg3.jpg");
			background-size: cover;
			background-position: center;
			box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.2),
				/* Inner shadow for depth */
				5px 5px 15px rgba(0, 0, 0, 0.3);
		}

		#replacement-letter p,
		#replacement-letter em {
			font-size: 1.6em;
			font-family: "Beau Rivage", "cursive", "Passions Conflict",
				"Times New Roman", Times, serif;
		}

		#letter-content-container {
			position: absolute;
			top: 10vh;

			max-width: 100%;
			max-height: 100%;
			word-wrap: break-word;
			/* Breaks long words to fit */
			white-space: normal;
			/* Allows proper wrapping */
			text-align: center;
		}

		#alert-notification {
			color: rgb(255, 209, 23);
		}

		a {
			text-decoration: none;
			color: rgb(224, 102, 126);
		}

		a:hover {
			color: rgb(163, 14, 39);
		}

		#flowers-top {
			position: absolute;
			top: 0;
			height: 300px;
			z-index: 3;
		}

		#flowers-corner {
			position: absolute;
			bottom: 2.5px;
			left: 0;
			height: 300px;
			z-index: 3;
		}

		#flowers-corner-right {
			position: absolute;
			bottom: 2.5px;
			right: 0;
			height: 300px;
			z-index: 3;
			rotate: 270deg;
		}

		#citation-bible {
			height: 250px;
			min-height: 250px;
			max-height: 400px;

			/* width: 1280px; */
			overflow: scroll;
			line-break: auto;
			max-width: 1280px;

			overflow-wrap: break-word;
			/* Forces word breaks when needed */
			word-wrap: break-word;
			/* Legacy support */
			white-space: normal;
			/* Allows wrapping */
		}

		#citation-bible p {
			width: 50vw;
			font-size: 1.8em;
			color: white;
			font-family: "Beau Rivage", "cursive";
			cursor: pointer;
		}

		/* Iphone 15: FIXME: This doesn't work. */
		@media screen and (max-width: 393px) {
			#citation-bible {
				top: -750px;
				left: -400px;
				height: 250px;

				min-height: 250px;
				max-height: 400px;

				width: 393px;
				max-width: 393px;
			}

			#citation-bible p {
				font-size: 3em;
			}
		}

		.bt-container {
			display: flex;
			flex-direction: column;
			gap: 25px;
			position: absolute;
			top: 2em;
			right: 3em;
		}

		#replay-bt {
			width: 150px;
			height: 75px;
			background-color: rgba(0, 0, 0, 0.4);
			border: none;
			color: white;
		}

		#replay-bt:hover,
		#site-mariage-bt:hover {
			background-color: rgba(46, 43, 43, 0.4);
			cursor: pointer;
		}

		#site-mariage-bt {
			width: 150px;
			height: 75px;
			background-color: rgba(0, 0, 0, 0.4);
			border: none;
			color: white;
		}

		#angel-wings {
			position: absolute;
			width: 800px;
			bottom: 100px;
			z-index: 5;
		}
	</style>
</head>

<body>
	<img alt="flowers" id="flowers-top" src="assets/flowers-crown1.png" />
	<img alt="flowers in left corner" id="flowers-corner" src="assets/flower-corner.png" />
	<img alt="flowers in right corner" id="flowers-corner-right" src="assets/flower-corner.png" />

	<div id="citation-bible">
		<p>
			"Mets-moi comme un sceau sur ton coeur, Comme un sceau sur ton bras;
			Car l'amour est fort comme la mort, La jalousie est inflexible comme
			le séjour des morts; Ses ardeurs sont des ardeurs de feu, Une flamme
			de l'Éternel." <br /><br />
			- Cantique des Cantiques 8:6-7 (LSG)
		</p>
	</div>

	<div class="wrapper">
		<div class="lid one"></div>
		<div class="lid two"></div>
		<div class="envelope">
			<div class="outer-seal">
				<div class="seal">
					<div class="sealInner"></div>
				</div>
			</div>
			<img alt="fire animation burning an envelope" id="fire-anim" src="assets/anim-fire.gif" />
		</div>
		<img alt="angel" id="angel-wings" src="assets/angel.gif" />
		<div class="letter"></div>
	</div>
	<div id="replacement-letter">
		<div id="letter-content-container">
			<p>
				<br /><br />

				Jennifer et Sylvain <br />
				vous invitent cordialement <br />
				à leur mariage sacré
				qui aura lieu <br />
				le samedi 18 octobre 2025 <br />
				à 12h30.<br /><br />

				Pour confirmer votre pr&eacute;sence <br />
				SVP vous inscrire <br />
				en cliquant sur le site du mariage ci-dessous. <br />

				Vous y trouverez également <br />
				plus de détails.

				<br /><br />

				<a href="https://sayi.do/sylvainetjennifer?bypassCache=true">Cliquez-ici pour aller vers le site du
					mariage.</a>

				<br /><br />

				Paix et bien,

				<br /><br />

				<em style="font-size: 40px">Jennifer Viger <br />
					et <br />
					Sylvain Tran</em>

				<br /><br />
			</p>
		</div>
	</div>
	<div class="bt-container">
		<button id="replay-bt">Rejouer</button>
		<button id="site-mariage-bt">Vers site mariage</button>
	</div>
</body>
<script src="lib/jquery.js"></script>
<script>
	// Hide some elements on scene start
	$(".wrapper").hide()
	$(".seal").hide()
	$("#fire-anim").hide()
	$("#replacement-letter").hide()
	$("#letter-content-container").hide()
	$("#flowers-top").hide()
	$("#flowers-corner").hide()
	$("#flowers-corner-right").hide()
	$(".bt-container").hide()
	$("#citation-bible").hide()
	$("#angel-wings").hide()

	// Fades
	$("#citation-bible").fadeTo(1000, 1)
	$(".wrapper").fadeIn(5000)
	$(".seal").fadeIn(1000)

	// Attach some events on bts
	$("#replay-bt").on("click touchstart", function () {
		location.reload()
	})

	$("#site-mariage-bt").on("click touchstart", function () {
		window.location.href = "https://sayi.do/sylvainetjennifer?bypassCache=true"
	})

	// Seal animations
	$(".seal").on("click touchstart", function () {
		// Hide citation
		$("#citation-bible").css("visibility", "hidden")

		// Open lids
		$(".wrapper .lid.one")
			.css("transform", "rotateX(90deg)")
			.css("transitionDelay", "0s")
		$(".wrapper .lid.two")
			.css("transform", "rotateX(180deg)")
			.css("transitionDelay", "0.25s")

		// Manifest the angel
		$("#angel-wings").fadeIn(2000)
		$("#angel-wings").slideUp(2000)

		// Pop-up placeholder letter
		$(".wrapper .letter")
			.css("transform", "translateY(-120px)")
			.css("transitionDelay", "0.5s")

		// Pop-out seal
		$(".seal")
			.css("transform", "translateY(-1000px)")
			.css("transitionDelay", "0.5s")
			.css("transition", "transform 0.5s linear")
		startAnimationSequence()
	})

	function startAnimationSequence() {
		// startFire()

		// playFireSounds()
		playPaperRustle()
		playAhhhhSound()
		setTimeout(function () {
			playAngelicChoirSound()
			playChurchBellSounds()
		}, 2500)

		removeEnveloppe()
		removeFire()
		showLetter()
	}

	function startFire() {
		$("#fire-anim").fadeIn(1500)
	}

	function removeFire() {
		$("#fire-anim").fadeOut(800)
	}

	function removeEnveloppe() {
		$(".wrapper").fadeTo(1500, 0)
	}

	function showLetter() {
		$("#replacement-letter").fadeTo(3000, 1)
		$("#letter-content-container").delay(1500).fadeTo(6000, 1)

		$("body").css("backgroundImage", "url('./assets/white-cloud-blue-sky.jpg')")
		$("body").css("transition", "background 5.5s ease-in-out")
		$("body").css("backgroundSize", "cover")

		$("#flowers-top").fadeIn(5500)
		$("#flowers-corner").fadeIn(5500)
		$("#flowers-corner-right").fadeIn(5500)
		$(".bt-container").delay(3000).fadeIn(5500)
	}

	function playFireSounds() {
		const fireSound = new Audio("./assets/fire-sound.mp3")
		fireSound.volume = 0.5
		fireSound.play()
		setTimeout(function () {
			let fadeInterval = setInterval(function () {
				if (fireSound.volume > 0.05) {
					fireSound.volume -= 0.05 // Reduce volume gradually
				} else {
					clearInterval(fadeInterval)
					fireSound.pause() // Stop audio when volume is nearly silent
				}
			}, 50)
		}, 750) // Start fading out after 0.75 seconds
	}

	function playPaperRustle() {
		const paperRustle = new Audio("./assets/paper-rustle.mp3")
		paperRustle.play()
	}

	function playAhhhhSound() {
		const ahhhh = new Audio("./assets/ahhhh.mp3")
		ahhhh.play()
	}

	function playAngelicChoirSound() {
		const angelicChoir = new Audio("./assets/angelic-choir.mp3")
		angelicChoir.play()
	}

	function playChurchBellSounds() {
		const churchBell = new Audio("./assets/church-bell.mp3")
		churchBell.volume = 0.3
		churchBell.play()
	}
</script>
<script src="./js/jquery-sakura.min.js"></script>
<script>
	// domReady
	$(function () {
		$("body").sakura()
	})

	// windowLoad
	// FIXME: Some weird bug is causing petals to accumulate at the centre of the screen after a while.
	$(window).on("load", function () {
		$("body").sakura("start", {
			blowAnimations: ["blow-soft-left"], // Horizontal movement animation names
			className: "sakura", // Class name to use
			fallSpeed: 1, // Factor for petal fall speed
			maxSize: 14, // Maximum petal size
			minSize: 9, // Minimum petal size
			newOn: 3000, // Interval after which a new petal is added
			swayAnimations: [
				// Swaying animation names
				"sway-0",
			],
		})
	})
</script>

</html>

<!-- 

Inspired by:

    * https://medium.com/web-for-you/how-to-make-a-interactive-envelope-9df970614eea
    * https://codepen.io/lisafolkerson/pen/BjRoJO    

-->